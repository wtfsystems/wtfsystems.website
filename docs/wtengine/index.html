<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WTEngine: About</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WTEngine
   </div>
   <div id="projectbrief">C++ Game Engine using Allegro</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">About </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <b>WTEngine</b> (What the Engine?) is a cross-platform game engine based on <a href="https://en.wikipedia.org/wiki/Entity_component_system">ECS</a> design that can be used to make a 2D action game. The engine is written in C++17 and uses the <a href="https://liballeg.org">Allegro Game Library</a> and <a href="https://www.icculus.org/physfs/">PhysicsFS</a>.</p>
<h3><a class="anchor" id="autotoc_md1"></a>
API Documentation:</h3>
<p><a href="https://www.wtfsystems.net/docs/wtengine/index.html">https://www.wtfsystems.net/docs/wtengine/index.html</a></p>
<p>For an example of the engine in action, see the <a href="https://github.com/wtfsystems/wtengine/blob/master/example/src/wte_demo.cpp">demo game code</a>.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md3"></a>
Library Installation</h1>
<p>Build and installation is handled by <a href="https://cmake.org/">CMake</a>. To build just the library: </p><div class="fragment"><div class="line">git clone https://github.com/wtfsystems/wtengine.git</div>
<div class="line">cd wtengine</div>
<div class="line">cmake .</div>
<div class="line">make</div>
</div><!-- fragment --><p>Then to install the library run: </p><div class="fragment"><div class="line">sudo make install</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md5"></a>
Example Game</h1>
<p>Requires the library to be installed to build.</p>
<div class="fragment"><div class="line">cd example</div>
<div class="line">cmake .</div>
<div class="line">make</div>
</div><!-- fragment --><p>No install process, just run the created <em>wte_demo</em> executable.</p>
<p>A compiled demo for Windows can be found in the <a href="https://github.com/wtfsystems/releases">releases</a> repository. Binary data to play the demo is included.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md7"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
pkg-config can't find wtengine</h2>
<p>Make sure the install location used for pkg-config is in PKG_CONFIG_PATH, example: </p><div class="fragment"><div class="line">export PKG_CONFIG_PATH=/usr/local/share/pkgconfig</div>
</div><!-- fragment --><p>Check <b>install_manifest.txt</b> to see where <b>wtengine.pc</b> was placed.</p>
<p>You can verify pkg-config can locate the engine by: </p><div class="fragment"><div class="line">pkg-config --libs --exists wtengine </div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md10"></a>
Manual</h1>
<hr  />
<p><b>NOTE:</b> <em>The following is incomplete, outdated, and is a work in progress.</em></p>
<hr  />
<h2><a class="anchor" id="autotoc_md13"></a>
Index</h2>
<hr  />
<h2><a class="anchor" id="autotoc_md15"></a>
Main Engine Object</h2>
<p>Creating a game is done by extending the <b>wte_main</b> object and implementing the members below.</p>
<p><em>Required:</em> </p><div class="fragment"><div class="line">virtual void load_menus(void) - Define menus here</div>
<div class="line">virtual void load_systems(void) - Load systems here</div>
<div class="line">virtual void new_game(void) - New game process</div>
<div class="line">virtual void end_game(void) - End game process</div>
</div><!-- fragment --><p><em>Optional:</em> </p><div class="fragment"><div class="line">virtual void on_menu_open(void) - Events when a menu opens</div>
<div class="line">virtual void on_menu_close(void) - Events when a menu closes</div>
<div class="line">virtual void out_of_focus(void) - Events if the game window is clicked out of</div>
<div class="line">virtual void back_in_focus(void) - Events when the game window is brought back into focus</div>
<div class="line">virtual void handle_custom_sys_msg(const message&amp;) - Define custom message handling</div>
</div><!-- fragment --><p>In your <b>main.cpp</b> file delcare the object as such: </p><div class="fragment"><div class="line">//  Initialize game object.</div>
<div class="line">wte_demo my_game(argc, argv);</div>
<div class="line">//  Run the game.</div>
<div class="line">my_game.do_game();</div>
</div><!-- fragment --><p>The command line arguments must be passed in for PhysicsFS.</p>
<p>When defining the constructor for your object, pass the window's display title as well: </p><div class="fragment"><div class="line">wte_demo::wte_demo(int argc, char **argv) : wte_main(argc, argv, &quot;WTE Demo&quot;)</div>
</div><!-- fragment --><p>See the demo files <b>main.cpp</b> and <b>wte_demo.cpp</b> for an example of an implementation.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md17"></a>
Build Flags</h2>
<p>All build flags are defined in <b>wte_global_defines.hpp</b></p>
<hr  />
<h4><a class="anchor" id="autotoc_md19"></a>
WTE_TICKS_PER_SECOND</h4>
<p>By default the engine will tick at 60 iterations a second. You can change the rate using this build flag. The value is a float.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md21"></a>
WTE_BUILD_DEBUG</h4>
<p>Build debug logging.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md23"></a>
WTE_MAX_PLAYING_SAMPLES</h4>
<p>Sets the maximum number of simultaneous playing samples. Default is eight.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md25"></a>
WTE_NO_MAGIC_PINK</h4>
<p>By default the engine will use "magic pink" (RGB 255, 0, 255) for transparency. Define this to disable the feature.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md27"></a>
Entities / Components / Systems</h2>
<p>WTEngine stores game objects in the <b>entity_manager</b> class.</p>
<h4><a class="anchor" id="autotoc_md28"></a>
Entities:</h4>
<p>Entities are any and all in-game objects, such as the player, background, enemies, even the text showing the score. When creating a new entity the engine will assign a unique ID number and unique name. If the engine is unable to create an entity the error code <b>WTE_ENTITY_ERROR</b> is returned. You can then change the name of the entity if desired. When setting the name the engine will verify it does not already exist.</p>
<p><em>Creating an entity:</em> </p><div class="fragment"><div class="line">entity_id e_id = world.new_entity();</div>
</div><!-- fragment --><p><em>Setting an entity name:</em> </p><div class="fragment"><div class="line">world.set_name(e_id, &quot;some_unique_name&quot;);</div>
</div><!-- fragment --><p><em>Get entity name by ID:</em> </p><div class="fragment"><div class="line">std::string player_name = world.get_name(plr_id);</div>
</div><!-- fragment --><p><em>Get entity ID by name:</em> </p><div class="fragment"><div class="line">entity_id e_id = world.get_id(&quot;some_entity&quot;);</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md30"></a>
Components:</h4>
<p>Components are the data objects that make up each entity. Examples would be the location on the screen, sprite data, hitpoints, etc. After creating an entity you can assign components to it using its Entity ID. The engine has seperate functions for reading and setting component data. You can also create your own components by extending the base <b>component</b> object.</p>
<p><em>Adding a component:</em> </p><div class="fragment"><div class="line">wte_new_component(e_id, cmp::visible, false);</div>
</div><!-- fragment --><p><em>Setting a component's data:</em> </p><div class="fragment"><div class="line">wte_set_component(e_id, cmp::sprite)-&gt;load_sprite(&quot;my_sprite.bmp&quot;);</div>
</div><!-- fragment --><p><em>Reading a component's data:</em> </p><div class="fragment"><div class="line">wte_get_component(e_id, cmp::location)-&gt;get_x()</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md32"></a>
Systems:</h4>
<p>Systems are functions that are processed each iteration when the game is running. These are designed to obtain all components of a certain type and process them. For example, the movement system will look for all entities with a velocity component, verify they have a location component, and update their posistion based on the velocity value. You can also create your own systems by extending the base <b>system</b> object. You then load all systems into the <b>system_manager</b> in order they will be processed.</p>
<p><em>Example:</em> </p><div class="fragment"><div class="line">void wte_demo::load_systems(void) {</div>
<div class="line">    wte_add_system(sys::input);</div>
<div class="line">    wte_add_system(sys::movement);</div>
<div class="line">    wte_add_system(sys::colision);</div>
<div class="line">    wte_add_system(sys::logic);</div>
<div class="line">    wte_add_system(sys::animate);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <b>entity_manager</b> has members for reading or setting all components of a type, see its documentation for more information.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md34"></a>
Components with Custom Functions</h2>
<p>Certain components within the engine allow to have custom functionality assigned. Below is the required function signatures for defining these components. Please see their individual documentation for more information.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md36"></a>
Background &amp; Overlay</h4>
<p>Define custom animation processes for backgrounds &amp; overlays. </p><div class="fragment"><div class="line">const entity_id&amp;, mgr::entity_manager&amp;, const int64_t&amp;</div>
</div><!-- fragment --><ul>
<li><b>const entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>const int64_t&amp;</b> - Reference to the current engine time value.</li>
</ul>
<hr  />
<h4><a class="anchor" id="autotoc_md38"></a>
Dispatcher</h4>
<p>Define entity message processing. </p><div class="fragment"><div class="line">const entity_id&amp;, const message&amp;, mgr::entity_manager&amp;, mgr::message_manager&amp;, const int64_t&amp;</div>
</div><!-- fragment --><ul>
<li><b>entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>const message&amp;</b> - Message to be processed.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>mgr::message_manager&amp;</b> - Reference to the message manager.</li>
<li><b>int64_t&amp;</b> - Reference to the current engine time value.</li>
</ul>
<hr  />
<h4><a class="anchor" id="autotoc_md40"></a>
Ai</h4>
<p>Define entity logic. Has seperate calls for enabled and disabled entities. </p><div class="fragment"><div class="line">const entity_id&amp;, mgr::entity_manager&amp;, mgr::message_manager&amp;, const int64_t&amp;</div>
</div><!-- fragment --><ul>
<li><b>entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>mgr::message_manager&amp;</b> - Reference to the message manager.</li>
<li><b>int64_t&amp;</b> - Reference to the current engine time value.</li>
</ul>
<hr  />
<h4><a class="anchor" id="autotoc_md42"></a>
Input_directional</h4>
<p>Directional input handling. </p><div class="fragment"><div class="line">const entity_id&amp;, const float&amp;, mgr::entity_manager&amp;, mgr::message_manager&amp;, const int64_t&amp;</div>
</div><!-- fragment --><ul>
<li><b>entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>const float&amp;</b> - Direction in radians.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>mgr::message_manager&amp;</b> - Reference to the message manager.</li>
<li><b>int64_t&amp;</b> - Reference to the current engine time value.</li>
</ul>
<hr  />
<h4><a class="anchor" id="autotoc_md44"></a>
Input_button</h4>
<p>Button input handling. </p><div class="fragment"><div class="line">const entity_id&amp;, mgr::entity_manager&amp;, mgr::message_manager&amp;, const int64_t&amp;</div>
</div><!-- fragment --><ul>
<li><b>entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>mgr::message_manager&amp;</b> - Reference to the message manager.</li>
<li><b>int64_t&amp;</b> - Reference to the current engine time value.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md46"></a>
Menus</h2>
<p>By default WTEngine creates two empty menus, <b>main_menu</b> and <b>game_menu</b>. You can then create additional menus as necessary and add items to them. See the documentation on the individual menu items for their usage and functionality. All menus are stored in the <b>menu_manager</b> object.</p>
<p><em>Creating a new menu:</em> </p><div class="fragment"><div class="line">mnu::menu my_menu = mnu::menu(&quot;settings&quot;, &quot;Settings&quot;);</div>
</div><!-- fragment --><p><em>Adding an item using set_menu:</em> </p><div class="fragment"><div class="line">menus.set_menu(&quot;main_menu&quot;)-&gt;add_item(wte_menu_action(&quot;Settings&quot;, &quot;open_menu&quot;, &quot;settings&quot;));</div>
</div><!-- fragment --><p><em>Adding an item directly:</em> </p><div class="fragment"><div class="line">my_menu.add_item(wte_menu_action(&quot;Return&quot;, &quot;close_menu&quot;));</div>
</div><!-- fragment --><p>You can also set the background and font color of the menus as such: </p><div class="fragment"><div class="line">menus.set_menu_color(ALLEGRO_COLOR font, ALLEGRO_COLOR background);</div>
</div><!-- fragment --><p> See the documentation on Allegro's color structures for information on the passing values.</p>
<p>A custom menu size can be also be set: </p><div class="fragment"><div class="line">menus.set_menu_size(200, 200, 10);</div>
</div><!-- fragment --><p> The values are width, height and padding in order. The engine will default to 500x400x32 if not called.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md48"></a>
Messaging and List of Built-In Commands</h2>
<p>All in-engine communication is done with the messaging queue. Messages can be used to change game settings, control the game menus, or have entities interact with each other. Messages can also be set with a timer value to be processed later. The <b>message_manager</b> stores messages and keeps track of when they should be processed.</p>
<p>When starting a new game, a file containing messages in binary format can be passed for processing. The engine also has a command (see list below) that can be used to load additional messages. These messages have their timer values added to the current engine time when loaded.</p>
<p>A tool named <em>csv2sdf</em> is included to convert files in CSV format to be readable by the engine.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md50"></a>
Message format:</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Timer (optional)   </th><th class="markdownTableHeadNone">System   </th><th class="markdownTableHeadNone">To (optional)   </th><th class="markdownTableHeadNone">From (optional)   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Arguments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Timer value to run at (-1 for instant)   </td><td class="markdownTableBodyNone">The system to process the message   </td><td class="markdownTableBodyNone">To entity   </td><td class="markdownTableBodyNone">From entity   </td><td class="markdownTableBodyNone">Command to exectute   </td><td class="markdownTableBodyNone">Arguments for command   </td></tr>
</table>
<p>Arguments are split with a semicolon ;</p>
<hr  />
<h4><a class="anchor" id="autotoc_md52"></a>
Examples:</h4>
<p><em>Send an instant message to pause music:</em> </p><div class="fragment"><div class="line">messages.add_message(message(&quot;audio&quot;, &quot;pause_music&quot;, &quot;&quot;));</div>
</div><!-- fragment --><p> <em>Delete my_entity at timer value 100:</em> </p><div class="fragment"><div class="line">messages.add_message(message(100, &quot;spawner&quot;, &quot;delete&quot;, &quot;my_entity&quot;));</div>
</div><!-- fragment --><p> <em>Communication between entities:</em> </p><div class="fragment"><div class="line">messages.add_message(message(&quot;entities&quot;, &quot;first_entity&quot;, &quot;second_entity&quot;, &quot;command&quot;, &quot;argument;another&quot;));</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md54"></a>
Built-In Messages</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">System   </th><th class="markdownTableHeadNone">Commmand   </th><th class="markdownTableHeadNone">Arguments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exit engine   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">exit   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Display an alert   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">alert   </td><td class="markdownTableBodyNone">(1) String of alert to display    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Start new game   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">new_game   </td><td class="markdownTableBodyNone">(1 - optional) Filename of game data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">End current game   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">end_game   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Open menu   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">open_menu   </td><td class="markdownTableBodyNone">(1) Name of menu to open    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Close menu   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">close_menu   </td><td class="markdownTableBodyNone">Close current menu (1 - optional) "all" to close all opened menus    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Enable a system   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">enable_system   </td><td class="markdownTableBodyNone">(1) Name of system    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Disable a system   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">disable_system   </td><td class="markdownTableBodyNone">(1) Name of system    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Set engine config variable   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">set_engcfg   </td><td class="markdownTableBodyNone">(1) "var=val" Variable to set and the value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Set game config variable   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">set_gamecfg   </td><td class="markdownTableBodyNone">(1) "var=val" Variable to set and the value    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Reconfigure the display   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">reconf_display   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Enable/disable FPS counter   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">fps_counter   </td><td class="markdownTableBodyNone">(1) "on/off"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Load a script from file   </td><td class="markdownTableBodyNone">system   </td><td class="markdownTableBodyNone">load_script   </td><td class="markdownTableBodyNone">(1) Filename of script    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Control music looping   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">music_loop   </td><td class="markdownTableBodyNone">(1) "enable/disable"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Play music   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">play_music   </td><td class="markdownTableBodyNone">(1) Filename to play    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Stop music   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">stop_music   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pause music   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">pause_music   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unpause music   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">unpause_music   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Load a sample   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">load_sample   </td><td class="markdownTableBodyNone">(1) Filename of sample    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unload a sample   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">unload_sample   </td><td class="markdownTableBodyNone">(1) Sample name or "all" to unload all    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Play a sample   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">play_sample   </td><td class="markdownTableBodyNone">(1) Sample name (2) Mode "once" or "reference name" for looping (3 - optional) Gain 0.0 - 1.0 (4 - optional) Pan -1.0 - 1.0 (5 - optional) Speed 0.00001 - 2.0 **    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Stop playing a sample   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">stop_sample   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Clear sample instances   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">clear_instances   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Play voice   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">play_voice   </td><td class="markdownTableBodyNone">(1) Filename to play    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Stop voice   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">stop_voice   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pause voice   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">pause_voice   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unpause voice   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">unpause_voice   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Control ambiance loop   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">ambiance_loop   </td><td class="markdownTableBodyNone">(1) "enable/disable"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Play ambiance   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">play_ambiance   </td><td class="markdownTableBodyNone">(1) Filename to play    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Stop ambiance   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">stop_ambiance   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pause ambiance   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">pause_ambiance   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unpause ambiance   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">unpause_ambiance   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Set volume levels (from engine cfg variables)   </td><td class="markdownTableBodyNone">audio   </td><td class="markdownTableBodyNone">set_volume   </td><td class="markdownTableBodyNone">none    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Create a new entity   </td><td class="markdownTableBodyNone">spawner   </td><td class="markdownTableBodyNone">new   </td><td class="markdownTableBodyNone">(1) Name of entity spawn template (2 or more) Additional arguments for spawning entity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Delete an entity   </td><td class="markdownTableBodyNone">spawner   </td><td class="markdownTableBodyNone">delete   </td><td class="markdownTableBodyNone">Name of entity to delete   </td></tr>
</table>
<p>** NOTE: When playing a sample to set the gain, pan, or speed you must list all previous arguments in order, even if you are not passing data.</p>
<p><em>Example:</em> </p><div class="fragment"><div class="line">some_sample;loop_ref;;0.4</div>
</div><!-- fragment --><p>This loads a looping sample with a pan value, but no gain or speed.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md56"></a>
Setting up PhysicsFS</h2>
<p>To set up <a href="https://www.icculus.org/physfs/">PhysicsFS</a> and configure the engine to load from a location, call the following in your <b>main.cpp</b> file before calling the game object:</p>
<div class="fragment"><div class="line">wte_main::add_file_location(&quot;data.zip&quot;);</div>
</div><!-- fragment --><p>You can make multiple calls to load from more than one location. That's all there is to it!</p>
<hr  />
<h2><a class="anchor" id="autotoc_md58"></a>
Setting up the Renderer</h2>
<p>The <b>render_manager</b> requires some parameters to be set up in your <b>main.cpp</b> file before calling the main engine object.</p>
<h4><a class="anchor" id="autotoc_md59"></a>
Set the arena</h4>
<p>Set the arena size in pixels. This is a bitmap that is used for drawing the visible game area to. It can later be scaled up or down as necessary with the <b>scale_factor</b> engine variable. </p><div class="fragment"><div class="line">mgr::render_manager::set_arena_size(1920, 1080);</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md60"></a>
Set the title screen</h4>
<p>Load a file to be used as the main title screen. This will be streched to fit the display size. If no file is provided, a black title screen will be drawn. </p><div class="fragment"><div class="line">mgr::render_manager::set_title_screen(&quot;title.bmp&quot;);</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md61"></a>
Set the background</h4>
<p>Load a file to be used as the in-game background. If the arena size is smaller than the display size, the background will be visible. This will be streched to fit the display size. If no file is provided, a black background will be drawn. </p><div class="fragment"><div class="line">mgr::render_manager::set_background_screen(&quot;title.bmp&quot;);</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md63"></a>
Spawning Entities</h2>
<p>Spawning new entities while the engine is running is handled by the <b>spawn_manager</b>. When setting up a new game, you can add functions to the <b>spawn_manager</b> to be called later.</p>
<p>Adding to the spawner is done as such: </p><div class="fragment"><div class="line">spawner.add_spawn(spawn_name, number_of_arguments, function)</div>
</div><!-- fragment --><p>Note that the number of arguments assigned must match what the calling message contains, but not counting the first argument. For example, if the message contains a total of 6 arguments, then pass the number 5. This is because the first argument of the message is used for searching the spawn_name value. If a number of arguments is being passed that the <b>spawn_manager</b> did not expect, the message will be ignored.</p>
<p>The function being passed is used to create the new entity and needs the following signature:</p>
<div class="fragment"><div class="line">const entity_id&amp;, mgr::entity_manager&amp;, const msg_arg_list&amp;</div>
</div><!-- fragment --><ul>
<li><b>const entity_id&amp;</b> - Reference to the Entity ID associated with the calling component.</li>
<li><b>mgr::entity_manager&amp;</b> - Reference to the entity manager.</li>
<li><b>const msg_arg_list&amp;</b> - Reference to the message arguments in vector format.</li>
</ul>
<p>Spawning or deleting entities is then performed by passing a message. See the section on messaging for more information.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md65"></a>
Variable Maps</h2>
<p>The variable maps are a method to dynamically create and store variables for use by the game engine. WTEngine has two variable maps: <b>game_cfg</b> and <b>engine_cfg</b>. These are stored as strings, but can be type-casted to return as specific data types. Be careful when using these as they can return unexpected results if misused!</p>
<p>The <b>engine_cfg</b> map should be used for storing configuration variables related to the engine, while <b>game_cfg</b> is used for variables related to your game. The <b>game_cfg</b> map also has members for performing simple math, see it's documentation for more information.</p>
<p><em>Registering a variable:</em> </p><div class="fragment"><div class="line">engine_cfg::reg(&quot;display_mode=windowed&quot;)</div>
</div><!-- fragment --><p><em>Or:</em> </p><div class="fragment"><div class="line">engine_cfg::reg(&quot;display_mode&quot;, &quot;windowed&quot;)</div>
</div><!-- fragment --><p><em>Setting a registered variable:</em> </p><div class="fragment"><div class="line">engine_cfg::set(&quot;draw_fps=1&quot;)</div>
</div><!-- fragment --><p><em>Retrieving data as a string:</em> </p><div class="fragment"><div class="line">game_cfg::get(&quot;score&quot;)</div>
</div><!-- fragment --><p><em>Retrieving data as a casted type:</em> </p><div class="fragment"><div class="line">game_cfg::get&lt;int&gt;(&quot;lives&quot;)</div>
</div><!-- fragment --><p><em>Performing math:</em> </p><div class="fragment"><div class="line">game_cfg::subtract&lt;int&gt;(&quot;lives&quot;, 1);</div>
</div><!-- fragment --><p>The messaging system can also be used to set these variables. See the documentation page on messaging for more information.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md67"></a>
Saving data:</h4>
<p>Both variable maps can save their data, but the functionality is different for each.</p>
<p>The <b>engine_cfg</b> map saves all registered data in <b>settings.cfg</b> and is saved/loaded with the following commands:</p>
<p><em>Load engine config data:</em> </p><div class="fragment"><div class="line">engine_cfg::load();</div>
</div><!-- fragment --><p><em>Save engine config data:</em> </p><div class="fragment"><div class="line">engine_cfg::save();</div>
</div><!-- fragment --><p>The <b>game_cfg</b> map is designed to store only the registered variables you specifically tell it to save. By default they will be saved to <b>game.cfg</b> but this can also be changed. When setting a new filename it becomes the active file and subsequent save commands will write to this file. This allows you to store seperate data into different files.</p>
<p><em>Setting a save file:</em> </p><div class="fragment"><div class="line">game_cfg::set_game_cfg_file(&quot;my_save.cfg&quot;)</div>
</div><!-- fragment --><p><em>Clearing old saved data:</em> </p><div class="fragment"><div class="line">game_cfg::clear_save();</div>
</div><!-- fragment --><p><em>Saving data:</em> </p><div class="fragment"><div class="line">game_cfg::save(&quot;hiscore&quot;);</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md69"></a>
Engine Config Variables Created by the Engine:</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Defined In   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">draw_fps   </td><td class="markdownTableBodyNone">wte_main.hpp   </td><td class="markdownTableBodyNone">0 = don't draw FPS, 1 = draw FPS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">display_mode   </td><td class="markdownTableBodyNone">wte_display.hpp   </td><td class="markdownTableBodyNone">windowed or windowed_full_screen    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">scale_factor   </td><td class="markdownTableBodyNone">wte_display.hpp   </td><td class="markdownTableBodyNone">Scale factor for drawing the arena    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">vsync   </td><td class="markdownTableBodyNone">wte_display.hpp   </td><td class="markdownTableBodyNone">0 (default) = Use gfx driver settings, 1 = on, 2 = off    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">main_vol   </td><td class="markdownTableBodyNone">audio_manager.hpp   </td><td class="markdownTableBodyNone">The main volume level (0.0f - 1.0f)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">mixN_vol   </td><td class="markdownTableBodyNone">audio_manager.hpp   </td><td class="markdownTableBodyNone">The volume level of individual mixers (N = 1 - 4) (0.0f - 1.0f)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">set_a_key_KEY   </td><td class="markdownTableBodyNone">wte_input_map.hpp   </td><td class="markdownTableBodyNone">Set A key bind (KEY = key to bind)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">set_b_key_KEY   </td><td class="markdownTableBodyNone">wte_input_map.hpp   </td><td class="markdownTableBodyNone">Set B key bind (KEY = key to bind)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">joy_ACTION   </td><td class="markdownTableBodyNone">wte_input_map.hpp   </td><td class="markdownTableBodyNone">Joystick input binding (ACTION = joystick action to bind)   </td></tr>
</table>
<hr  />
<p>End </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 27 2021 18:09:24 for WTEngine by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
